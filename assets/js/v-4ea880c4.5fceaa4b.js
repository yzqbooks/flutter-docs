"use strict";(self.webpackChunkflutter_docs=self.webpackChunkflutter_docs||[]).push([[3844],{29787:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-4ea880c4","path":"/chapter6/keepalive.html","title":"6.8 å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜ KeepAlive","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"6.8.1 AutomaticKeepAlive","slug":"_6-8-1-automatickeepalive","link":"#_6-8-1-automatickeepalive","children":[]},{"level":2,"title":"6.8.2 KeepAliveWrapper","slug":"_6-8-2-keepalivewrapper","link":"#_6-8-2-keepalivewrapper","children":[]}],"git":{"createdTime":1654491188000,"updatedTime":1654491188000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":1}]},"readingTime":{"minutes":4.56,"words":1369},"filePathRelative":"chapter6/keepalive.md","localizedDate":"2022å¹´6æœˆ6æ—¥","excerpt":""}')},50218:(n,s,a)=>{a.r(s),a.d(s,{default:()=>o});var e=a(6808);const t=a.p+"assets/img/6-17.af578135.png",p=a.p+"assets/img/6-18.5514a90d.png",c=a.p+"assets/img/6-19.c1c9f5d7.png",i=[(0,e.uE)('<h1 id="_6-8-å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜-keepalive" tabindex="-1"><a class="header-anchor" href="#_6-8-å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜-keepalive" aria-hidden="true">#</a> 6.8 å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜ KeepAlive</h1><p>æœ¬èŠ‚å°†ä»‹ç»ä¸€ç§åœ¨å¯æ»šåŠ¨ç»„ä»¶ä¸­ç¼“å­˜æŒ‡å®šå­é¡¹çš„é€šç”¨æ–¹æ¡ˆã€‚</p><p>é¦–å…ˆå›æƒ³ä¸€ä¸‹ï¼Œåœ¨ä»‹ç» ListView æ—¶ï¼Œæœ‰ä¸€ä¸ª<code>addAutomaticKeepAlives</code> å±æ€§æˆ‘ä»¬å¹¶æ²¡æœ‰ä»‹ç»ï¼Œå¦‚æœ<code>addAutomaticKeepAlives</code> ä¸º <code>true</code>ï¼Œåˆ™ ListView ä¼šä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹æ·»åŠ ä¸€ä¸ª AutomaticKeepAlive çˆ¶ç»„ä»¶ã€‚è™½ç„¶ PageView çš„é»˜è®¤æ„é€ å‡½æ•°å’Œ PageView.builder æ„é€ å‡½æ•°ä¸­æ²¡æœ‰è¯¥å‚æ•°ï¼Œä½†å®ƒä»¬æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ª SliverChildDelegate æ¥è´Ÿè´£åˆ—è¡¨é¡¹çš„æŒ‰éœ€åŠ è½½ï¼Œè€Œåœ¨ SliverChildDelegate ä¸­æ¯å½“åˆ—è¡¨é¡¹æ„å»ºå®Œæˆåï¼ŒSliverChildDelegate éƒ½ä¼šä¸ºå…¶æ·»åŠ ä¸€ä¸ª AutomaticKeepAlive çˆ¶ç»„ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬å°±å…ˆä»‹ç»ä¸€ä¸‹ AutomaticKeepAlive ç»„ä»¶ã€‚</p><h2 id="_6-8-1-automatickeepalive" tabindex="-1"><a class="header-anchor" href="#_6-8-1-automatickeepalive" aria-hidden="true">#</a> 6.8.1 AutomaticKeepAlive</h2><p>AutomaticKeepAlive çš„ç»„ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯å°†åˆ—è¡¨é¡¹çš„æ ¹ RenderObject çš„ keepAlive <strong>æŒ‰éœ€è‡ªåŠ¨æ ‡è®°</strong> ä¸º true æˆ– falseã€‚ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ ¹ RenderObject å¯¹åº”çš„ç»„ä»¶å°±æ˜¯åˆ—è¡¨é¡¹çš„æ ¹ Widgetï¼Œä»£è¡¨æ•´ä¸ªåˆ—è¡¨é¡¹ç»„ä»¶ï¼ŒåŒæ—¶æˆ‘ä»¬å°†åˆ—è¡¨ç»„ä»¶çš„ ViewportåŒºåŸŸ + cacheExtentï¼ˆé¢„æ¸²æŸ“åŒºåŸŸï¼‰ç§°ä¸º<strong>åŠ è½½åŒºåŸŸ</strong> ï¼š</p><ol><li>å½“ keepAlive æ ‡è®°ä¸º false æ—¶ï¼Œå¦‚æœåˆ—è¡¨é¡¹æ»‘å‡ºåŠ è½½åŒºåŸŸæ—¶ï¼Œåˆ—è¡¨ç»„ä»¶å°†ä¼šè¢«é”€æ¯ã€‚</li><li>å½“ keepAlive æ ‡è®°ä¸º true æ—¶ï¼Œå½“åˆ—è¡¨é¡¹æ»‘å‡ºåŠ è½½åŒºåŸŸåï¼ŒViewport ä¼šå°†åˆ—è¡¨ç»„ä»¶ç¼“å­˜èµ·æ¥ï¼›å½“åˆ—è¡¨é¡¹è¿›å…¥åŠ è½½åŒºåŸŸæ—¶ï¼ŒViewport ä»å…ˆä»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»ç¼“å­˜ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™é‡æ–°åˆ›å»ºåˆ—è¡¨é¡¹ã€‚</li></ol><p>é‚£ä¹ˆ AutomaticKeepAlive ä»€ä¹ˆæ—¶å€™ä¼šå°†åˆ—è¡¨é¡¹çš„ keepAlive æ ‡è®°ä¸º true æˆ– false å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¼€å‘è€…è¯´äº†ç®—ï¼Flutter ä¸­å®ç°äº†ä¸€å¥—ç±»ä¼¼ C/S çš„æœºåˆ¶ï¼ŒAutomaticKeepAlive å°±ç±»ä¼¼ä¸€ä¸ª Serverï¼Œå®ƒçš„å­ç»„ä»¶å¯ä»¥æ˜¯ Clientï¼Œè¿™æ ·å­ç»„ä»¶æƒ³æ”¹å˜æ˜¯å¦éœ€è¦ç¼“å­˜çš„çŠ¶æ€æ—¶å°±å‘ AutomaticKeepAlive å‘ä¸€ä¸ªé€šçŸ¥æ¶ˆæ¯ï¼ˆKeepAliveNotificationï¼‰ï¼ŒAutomaticKeepAlive æ”¶åˆ°æ¶ˆæ¯åä¼šå»æ›´æ”¹ keepAlive çš„çŠ¶æ€ï¼Œå¦‚æœæœ‰å¿…è¦åŒæ—¶åšä¸€äº›èµ„æºæ¸…ç†çš„å·¥ä½œï¼ˆæ¯”å¦‚ keepAlive ä» true å˜ä¸º false æ—¶ï¼Œè¦é‡Šæ”¾ç¼“å­˜ï¼‰ã€‚</p><p>æˆ‘ä»¬åŸºäºä¸Šä¸€èŠ‚ PageView ç¤ºä¾‹ï¼Œå®ç°é¡µé¢ç¼“å­˜ï¼Œæ ¹æ®ä¸Šé¢çš„æè¿°å®ç°æ€è·¯å°±å¾ˆç®€å•äº†ï¼šè®©Page é¡µå˜æˆä¸€ä¸ª AutomaticKeepAlive Client å³å¯ã€‚ä¸ºäº†ä¾¿äºå¼€å‘è€…å®ç°ï¼ŒFlutter æä¾›äº†ä¸€ä¸ª AutomaticKeepAliveClientMixin ï¼Œæˆ‘ä»¬åªéœ€è¦è®© PageState æ··å…¥è¿™ä¸ª mixinï¼Œä¸”åŒæ—¶æ·»åŠ ä¸€äº›å¿…è¦æ“ä½œå³å¯ï¼š</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">class</span> _PageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">with</span> <span class="token class-name">AutomaticKeepAliveClientMixin</span> <span class="token punctuation">{</span>\n\n  <span class="token metadata function">@override</span>\n  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¿…é¡»è°ƒç”¨</span>\n    <span class="token keyword">return</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>text</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> textScaleFactor<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token metadata function">@override</span>\n  bool <span class="token keyword">get</span> wantKeepAlive <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦éœ€è¦ç¼“å­˜</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›ä¸€ä¸ª <code>wantKeepAlive </code>ï¼Œå®ƒä¼šè¡¨ç¤º AutomaticKeepAlive æ˜¯å¦éœ€è¦ç¼“å­˜å½“å‰åˆ—è¡¨é¡¹ï¼›å¦å¤–æˆ‘ä»¬å¿…é¡»åœ¨ build æ–¹æ³•ä¸­è°ƒç”¨ä¸€ä¸‹ <code>super.build(context)</code>ï¼Œè¯¥æ–¹æ³•å®ç°åœ¨ AutomaticKeepAliveClientMixin ä¸­ï¼ŒåŠŸèƒ½å°±æ˜¯æ ¹æ®å½“å‰ <code>wantKeepAlive</code> çš„å€¼ç»™ AutomaticKeepAlive å‘é€æ¶ˆæ¯ï¼ŒAutomaticKeepAlive æ”¶åˆ°æ¶ˆæ¯åå°±ä¼šå¼€å§‹å·¥ä½œï¼Œå¦‚å›¾6-17æ‰€ç¤ºï¼š</p><p><img src="'+t+'" alt="å›¾6-17"></p><p>ç°åœ¨æˆ‘ä»¬é‡æ–°è¿è¡Œä¸€ä¸‹ç¤ºä¾‹ï¼Œå‘ç°æ¯ä¸ª Page é¡µåªä¼š build ä¸€æ¬¡ï¼Œç¼“å­˜æˆåŠŸäº†ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬é‡‡ç”¨ PageView.custom æ„å»ºé¡µé¢æ—¶æ²¡æœ‰ç»™åˆ—è¡¨é¡¹åŒ…è£… AutomaticKeepAlive çˆ¶ç»„ä»¶ï¼Œåˆ™ä¸Šè¿°æ–¹æ¡ˆä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºæ­¤æ—¶Client å‘å‡ºæ¶ˆæ¯åï¼Œæ‰¾ä¸åˆ° Serverï¼Œ404 äº†ï¼ŒğŸ˜€ã€‚</p><h2 id="_6-8-2-keepalivewrapper" tabindex="-1"><a class="header-anchor" href="#_6-8-2-keepalivewrapper" aria-hidden="true">#</a> 6.8.2 KeepAliveWrapper</h2><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ AutomaticKeepAliveClientMixin å¿«é€Ÿçš„å®ç°é¡µé¢ç¼“å­˜åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ··å…¥çš„æ–¹å¼å®ç°ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œå› ä¸ºå¿…é¡»æ›´æ”¹ Page çš„ä»£ç ï¼Œæœ‰ä¾µå…¥æ€§ï¼Œè¿™å°±å¯¼è‡´ä¸æ˜¯å¾ˆçµæ´»ï¼Œæ¯”å¦‚ä¸€ä¸ªç»„ä»¶èƒ½åŒæ—¶åœ¨åˆ—è¡¨ä¸­å’Œåˆ—è¡¨å¤–ä½¿ç”¨ï¼Œä¸ºäº†åœ¨åˆ—è¡¨ä¸­ç¼“å­˜å®ƒï¼Œåˆ™æˆ‘ä»¬å¿…é¡»å®ç°ä¸¤ä»½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¬”è€…å°è£…äº†ä¸€ä¸ª KeepAliveWrapper ç»„ä»¶ï¼Œå¦‚æœå“ªä¸ªåˆ—è¡¨é¡¹éœ€è¦ç¼“å­˜ï¼Œåªéœ€è¦ä½¿ç”¨ KeepAliveWrapper åŒ…è£¹ä¸€ä¸‹å®ƒå³å¯ã€‚</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token metadata function">@override</span>\n<span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> children <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//åªéœ€è¦ç”¨ KeepAliveWrapper åŒ…è£…ä¸€ä¸‹å³å¯</span>\n    children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span><span class="token class-name">Page</span><span class="token punctuation">(</span> text<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token class-name">PageView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> children<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯ KeepAliveWrapper çš„å®ç°æºç ï¼š</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">KeepAliveWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    required <span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">final</span> bool keepAlive<span class="token punctuation">;</span>\n  <span class="token keyword">final</span> <span class="token class-name">Widget</span> child<span class="token punctuation">;</span>\n\n  <span class="token metadata function">@override</span>\n  _KeepAliveWrapperState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_KeepAliveWrapperState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> _KeepAliveWrapperState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">&gt;</span></span>\n    <span class="token keyword">with</span> <span class="token class-name">AutomaticKeepAliveClientMixin</span> <span class="token punctuation">{</span>\n  <span class="token metadata function">@override</span>\n  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> widget<span class="token punctuation">.</span>child<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token metadata function">@override</span>\n  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token keyword">covariant</span> <span class="token class-name">KeepAliveWrapper</span> oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>keepAlive <span class="token operator">!=</span> widget<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// keepAlive çŠ¶æ€éœ€è¦æ›´æ–°ï¼Œå®ç°åœ¨ AutomaticKeepAliveClientMixin ä¸­</span>\n      <span class="token function">updateKeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token metadata function">@override</span>\n  bool <span class="token keyword">get</span> wantKeepAlive <span class="token operator">=</span><span class="token operator">&gt;</span> widget<span class="token punctuation">.</span>keepAlive<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æˆ‘ä»¬å†åœ¨ ListView ä¸­æµ‹ä¸€ä¸‹ï¼š</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">KeepAliveTest</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token class-name">KeepAliveTest</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token metadata function">@override</span>\n  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span>\n        <span class="token comment">// ä¸º true åä¼šç¼“å­˜æ‰€æœ‰çš„åˆ—è¡¨é¡¹ï¼Œåˆ—è¡¨é¡¹å°†ä¸ä¼šé”€æ¯ã€‚</span>\n        <span class="token comment">// ä¸º false æ—¶ï¼Œåˆ—è¡¨é¡¹æ»‘å‡ºé¢„åŠ è½½åŒºåŸŸåå°†ä¼šåˆ«é”€æ¯ã€‚</span>\n        <span class="token comment">// ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„æ˜¯å¦å¿…è¦ï¼Œå› ä¸ºå¯¹æ‰€æœ‰åˆ—è¡¨é¡¹éƒ½ç¼“å­˜çš„ä¼šå¯¼è‡´æ›´å¤šçš„å†…å­˜æ¶ˆè€—</span>\n        keepAlive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        child<span class="token punctuation">:</span> <span class="token class-name">ListItem</span><span class="token punctuation">(</span>index<span class="token punctuation">:</span> index<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">ListItem</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token class-name">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">final</span> int index<span class="token punctuation">;</span>\n\n  <span class="token metadata function">@override</span>\n  _ListItemState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_ListItemState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> _ListItemState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListItem</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>\n  <span class="token metadata function">@override</span>\n  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token class-name">ListTile</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>index</span><span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token metadata function">@override</span>\n  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;dispose </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>index</span><span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹éƒ½è¢«ç¼“å­˜äº†ï¼Œæ‰€ä»¥è¿è¡Œåæ»‘åŠ¨åˆ—è¡¨é¢„æœŸæ—¥å¿—é¢æ¿ä¸ä¼šæœ‰ä»»ä½•æ—¥å¿—ï¼Œå¦‚å›¾6-18æ‰€ç¤ºï¼š</p><p><img src="'+p+'" alt="å›¾6-18"></p><p>å¥½æˆ‘ä»¬é¢„æœŸä¸€è‡´ï¼Œæ—¥å¿—é¢æ¿æ²¡æœ‰æ—¥å¿—ã€‚å¦‚æœæˆ‘ä»¬å°† keepAlive è®¾ä¸º falseï¼Œåˆ™å½“åˆ—è¡¨é¡¹æ»‘å‡ºé¢„æ¸²æŸ“åŒºåŸŸååˆ™ä¼šé”€æ¯ï¼Œæ—¥å¿—é¢æ¿å°†æœ‰è¾“å‡ºï¼Œå¦‚å›¾6-19æ‰€ç¤ºï¼š</p><p><img src="'+c+'" alt="å›¾6-19"></p><p>å¯è§æˆ‘ä»¬å°è£…çš„ KeepAliveWrapper èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œç¬”è€…å°† KeepAliveWrapper æ·»åŠ åˆ°äº† flukit ç»„ä»¶åº“ï¼Œå¦‚æœè¯»è€…éœ€è¦å¯ä»¥åœ¨ flukit ç»„ä»¶åº“ä¸­æ‰¾åˆ°å®ƒã€‚</p>',24)],l={},o=(0,a(18580).Z)(l,[["render",function(n,s){return(0,e.wg)(),(0,e.iD)("div",null,i)}]])},18580:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);